import { getAreaTreeData } from '@/api/area'
import { formatRegion } from '@/utils/common'
export default {
    state: {
        treeData: []
    },
    mutations: {
        setTreeData(state, args) {
            state.treeData = args;
        }
    },
    actions: {
        setTreeData({state, commit}) {
            console.log(state.treeData)
            commit("setTreeData", formatRegion([{"id":"E58C861987374483A5E64F4B1D7F046B","checked":null,"detailAddr":"湖北省","fPopulation":null,"gbCode":"420000000000","longitude":114.348440736587,"latitude":30.5516000646584,"name":"湖北省","orgClass":"省级","orgCodea":"P42","population":null,"region":null,"areaParentId":null,"parent":null,"children":[{"id":"43574F74D5DA4BB3B69C2E14E8F1C44C","checked":null,"detailAddr":"湖北省随州市","fPopulation":null,"gbCode":"421300000000","longitude":113.389450018222,"latitude":31.6965167723283,"name":"随州市","orgClass":"市级","orgCodea":"P42Q13","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[{"id":"239D17E4A3704AE68B8C3B79755212A3","checked":null,"detailAddr":"湖北省随州市曾都区","fPopulation":null,"gbCode":"421303000000","longitude":113.377513334605,"latitude":31.7221228612708,"name":"曾都区","orgClass":"县级","orgCodea":"P42Q13C03","population":null,"region":null,"areaParentId":"43574F74D5DA4BB3B69C2E14E8F1C44C","parent":null,"children":[]},{"id":"3D03F28D5CBE458594331FF13A10506E","checked":null,"detailAddr":"湖北省随州市广水市","fPopulation":null,"gbCode":"421381000000","longitude":113.83259337884,"latitude":31.6224760380074,"name":"广水市","orgClass":"县级","orgCodea":"P42Q13C81","population":null,"region":null,"areaParentId":"43574F74D5DA4BB3B69C2E14E8F1C44C","parent":null,"children":[]},{"id":"66616BE1AE2C4A81BCB589B417E54DBE","checked":null,"detailAddr":"湖北省随州市市辖区","fPopulation":null,"gbCode":"421301000000","longitude":113.389450018222,"latitude":31.6965167723283,"name":"市辖区","orgClass":"县级","orgCodea":"P42Q13C01","population":null,"region":null,"areaParentId":"43574F74D5DA4BB3B69C2E14E8F1C44C","parent":null,"children":[]},{"id":"EDE24C37095E4EE3BD32C1514AB80248","checked":null,"detailAddr":"湖北省随州市随县","fPopulation":null,"gbCode":"421321000000","longitude":113.306458356902,"latitude":31.8599716782583,"name":"随县","orgClass":"县级","orgCodea":"P42Q13C21","population":null,"region":null,"areaParentId":"43574F74D5DA4BB3B69C2E14E8F1C44C","parent":null,"children":[]}]},{"id":"4BBEECE4BEF14221A0570CCC9C2AC3A7","checked":null,"detailAddr":"湖北省黄冈市","fPopulation":null,"gbCode":"421100000000","longitude":114.878490484108,"latitude":30.4593588576181,"name":"黄冈市","orgClass":"市级","orgCodea":"P42Q11","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"5DAB7B1CB8F94DE6B505BAD2D187A600","checked":null,"detailAddr":"湖北省宜昌市","fPopulation":null,"gbCode":"420500000000","longitude":111.292549210354,"latitude":30.6974464844924,"name":"宜昌市","orgClass":"市级","orgCodea":"P42Q05","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"5F043607468A48BCA3B84DEA12D282DE","checked":null,"detailAddr":"湖北省十堰市","fPopulation":null,"gbCode":"420300000000","longitude":110.804529560696,"latitude":32.6350618584012,"name":"十堰市","orgClass":"市级","orgCodea":"P42Q03","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"6DBC2325CC0243B8B43CD5D8FA04E25E","checked":null,"detailAddr":"湖北省省直辖县级行政区划","fPopulation":null,"gbCode":"429000000000","longitude":114.348440736587,"latitude":30.5516000646584,"name":"省直辖县级行政区划","orgClass":"市级","orgCodea":"P42Q90","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"923917F53CC34ED2AFCF04F0C8220A5E","checked":null,"detailAddr":"湖北省孝感市","fPopulation":null,"gbCode":"420900000000","longitude":113.922510077337,"latitude":30.9306892270183,"name":"孝感市","orgClass":"市级","orgCodea":"P42Q09","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"925B24836DE040838FDF189226F9C9DC","checked":null,"detailAddr":"湖北省襄阳市","fPopulation":null,"gbCode":"420600000000","longitude":112.128537201002,"latitude":32.0147968046692,"name":"襄阳市","orgClass":"市级","orgCodea":"P42Q06","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"9D0E696520AE4215BF089A5F21A8B647","checked":null,"detailAddr":"湖北省荆州市","fPopulation":null,"gbCode":"421000000000","longitude":112.245522629261,"latitude":30.3408421077429,"name":"荆州市","orgClass":"市级","orgCodea":"P42Q10","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"C30ACE8277F149108A62082727B34ED0","checked":null,"detailAddr":"湖北省咸宁市","fPopulation":null,"gbCode":"421200000000","longitude":114.328519090268,"latitude":29.8470559476465,"name":"咸宁市","orgClass":"市级","orgCodea":"P42Q12","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"D55EFA868AFC40A396BC7C9D6E9F841F","checked":null,"detailAddr":"湖北省恩施土家族苗族自治州","fPopulation":null,"gbCode":"422800000000","longitude":109.494592618575,"latitude":30.2779395753011,"name":"恩施土家族苗族自治州","orgClass":"市级","orgCodea":"P42Q28","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"DB0F5B00466B4DDF935DA58B4D5EDA49","checked":null,"detailAddr":"湖北省荆门市","fPopulation":null,"gbCode":"420800000000","longitude":112.20639298023,"latitude":31.0417325755696,"name":"荆门市","orgClass":"市级","orgCodea":"P42Q08","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"E9D72CACFCA24BCA82D15F2F3246D56F","checked":null,"detailAddr":"湖北省鄂州市","fPopulation":null,"gbCode":"420700000000","longitude":114.901607388271,"latitude":30.396572173317,"name":"鄂州市","orgClass":"市级","orgCodea":"P42Q07","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"EB7EBD07ED7A480B85D580C23DDF31DC","checked":null,"detailAddr":"湖北省黄石市","fPopulation":null,"gbCode":"420200000000","longitude":115.045532908944,"latitude":30.2052078489416,"name":"黄石市","orgClass":"市级","orgCodea":"P42Q02","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]},{"id":"EF76CA3C70934DF08713661F4DC9673D","checked":null,"detailAddr":"湖北省武汉市","fPopulation":null,"gbCode":"420100000000","longitude":114.311581554732,"latitude":30.598466736401,"name":"武汉市","orgClass":"市级","orgCodea":"P42Q01","population":null,"region":null,"areaParentId":"E58C861987374483A5E64F4B1D7F046B","parent":null,"children":[]}]}]))
            if(state.treeData.length == 0) {
                getAreaTreeData().then(res => {
                    console.log(formatRegion([res.data.data]));
                    commit("setTreeData", formatRegion([res.data.data]))
                })
            }
        }
    }
}