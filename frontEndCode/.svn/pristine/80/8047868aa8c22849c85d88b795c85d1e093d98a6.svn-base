{"version":3,"sources":["webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?5a93","webpack:///./src/components/Login.vue"],"names":["Login","data","ifRemember","formInline","userName","password","ruleInline","required","message","trigger","type","min","methods","remember","document","cookie","length","this","setCookie","c_name","c_pwd","exdays","exdate","Date","setTime","getTime","window","toGMTString","getCookie","arr","split","console","log","i","arr2","clearCookie","handleSubmit","name","_this","$refs","validate","valid","param","URLSearchParams","append","$axios","method","url","then","res","state","sessionStorage","setItem","stringify_default","information","$store","commit","$router","push","$Message","error","info","err","resetForm","resetFields","created","that","onkeypress","e","all","event","keyCode","which","components_Login","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","rules","prop","placeholder","size","clearable","value","callback","$$v","$set","expression","slot","staticStyle","float","margin-top","text-align","margin-right","on","click","$event","margin-left","background","color","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"oJAmEAA,GACAC,KADA,WAEA,OACAC,YAAA,EACAC,YACAC,SAAA,GACAC,SAAA,IAEAC,YACAF,WACAG,UAAA,EAAAC,QAAA,UAAAC,QAAA,SAEAJ,WACAE,UAAA,EAAAC,QAAA,UAAAC,QAAA,SACAC,KAAA,SAAAC,IAAA,EAAAH,QAAA,WAAAC,QAAA,YAKAG,SACAC,SADA,WAEAC,SAAAC,OAAAC,OAAA,EACAC,KAAAf,YAAA,EAEAe,KAAAf,YAAA,GAGAgB,UARA,SAQAC,EAAAC,EAAAC,GACA,IAAAC,EAAA,IAAAC,KACAD,EAAAE,QAAAF,EAAAG,UAAA,MAAAJ,GAEAK,OAAAZ,SAAAC,OAAA,YAAAI,EAAA,mBAAAG,EAAAK,cACAD,OAAAZ,SAAAC,OAAA,WAAAK,EAAA,mBAAAE,EAAAK,eAEAC,UAAA,WACA,GAAAd,SAAAC,OAAAC,OAAA,GACA,IAAAa,EAAAf,SAAAC,OAAAe,MAAA,MACAC,QAAAC,IAAAH,GACA,QAAAI,EAAA,EAAAA,EAAAJ,EAAAb,OAAAiB,IAAA,CACA,IAAAC,EAAAL,EAAAI,GAAAH,MAAA,KACAC,QAAAC,IAAAE,GAEA,YAAAA,EAAA,GACAjB,KAAAd,WAAAC,SAAA8B,EAAA,GACA,WAAAA,EAAA,KACAjB,KAAAd,WAAAE,SAAA6B,EAAA,OAMAC,YAAA,WACAlB,KAAAC,UAAA,WAEAkB,aAnCA,SAmCAC,GAAA,IAAAC,EAAArB,KACAA,KAAAsB,MAAAF,GAAAG,SAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAC,EAAA,IAAAC,gBACAD,EAAAE,OAAA,WAAAN,EAAAnC,WAAAC,UACAsC,EAAAE,OAAA,WAAAN,EAAAnC,WAAAE,UACAiC,EAAAO,QACAC,OAAA,OACAC,IAAA,kBACA9C,KAAAyC,IACAM,KAAA,SAAAC,GAEA,GADAlB,QAAAC,IAAAiB,GACA,GAAAA,EAAAhD,KAAAiD,MAAA,CAEAxB,OAAAyB,eAAAC,QAAA,QAAAC,IAAAJ,EAAAhD,YAEA,IAAAqD,EAAAL,EAAAhD,UACAqC,EAAAiB,OAAAC,OAAA,iBAAAF,GACAhB,EAAAmB,QAAAC,KAAA,gBACApB,EAAApC,WACAoC,EAAApB,UAAAoB,EAAAnC,WAAAC,SAAAkC,EAAAnC,WAAAE,SAAA,GAEAiC,EAAAH,mBAIAG,EAAAqB,SAAAC,MAAAX,EAAAhD,KAAA4D,OAEA,SAAAC,GACA/B,QAAAC,IAAA8B,UAGAxB,EAAAqB,SAAAC,MAAA,YAKAG,UAxEA,WAyEAhC,QAAAC,IAAAf,KAAAsB,MAAApC,YACAc,KAAAsB,MAAApC,WAAA6D,gBAIAC,QAjGA,WAkGA,IAAAC,EAAAjD,KACAH,SAAAqD,WAAA,SAAAC,GAEA,QADAtD,SAAAuD,IAAAC,MAAAC,QAAAH,EAAAI,OAGA,OADAN,EAAA9B,aAAA,eACA,GAGAnB,KAAAW,YACAX,KAAAJ,aC3Ke4D,GADEC,OAFjB,WAA0B,IAAAC,EAAA1D,KAAa2D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,MAAAH,EAAAM,GAAA,iBAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyDE,YAAA,oBAA8BF,EAAA,QAAaI,IAAA,aAAAC,OAAwBC,MAAAT,EAAAxE,WAAAkF,MAAAV,EAAArE,cAA+CwE,EAAA,YAAiBK,OAAOG,KAAA,cAAmBR,EAAA,SAAcK,OAAOzE,KAAA,OAAA6E,YAAA,WAAAC,KAAA,QAAAC,UAAA,IAAqEL,OAAQM,MAAAf,EAAAxE,WAAA,SAAAwF,SAAA,SAAAC,GAAyDjB,EAAAkB,KAAAlB,EAAAxE,WAAA,WAAAyF,IAA0CE,WAAA,yBAAmChB,EAAA,QAAaK,OAAOY,KAAA,UAAArF,KAAA,qBAAA8E,KAAA,MAAyDO,KAAA,aAAgB,OAAApB,EAAAM,GAAA,KAAAH,EAAA,YAAqCK,OAAOG,KAAA,cAAmBR,EAAA,SAAcK,OAAOzE,KAAA,WAAA6E,YAAA,WAAAC,KAAA,QAAAC,UAAA,IAAyEL,OAAQM,MAAAf,EAAAxE,WAAA,SAAAwF,SAAA,SAAAC,GAAyDjB,EAAAkB,KAAAlB,EAAAxE,WAAA,WAAAyF,IAA0CE,WAAA,yBAAmChB,EAAA,QAAaK,OAAOY,KAAA,UAAArF,KAAA,mBAAA8E,KAAA,MAAuDO,KAAA,aAAgB,OAAApB,EAAAM,GAAA,KAAAH,EAAA,YAAqCkB,aAAaC,MAAA,SAAgBb,OAAQM,MAAAf,EAAA,WAAAgB,SAAA,SAAAC,GAAgDjB,EAAAzE,WAAA0F,GAAmBE,WAAA,gBAA0BnB,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,YAA8CkB,aAAaE,aAAA,OAAAC,aAAA,YAA2CrB,EAAA,UAAekB,aAAaI,eAAA,QAAsBjB,OAAQzE,KAAA,WAAiB2F,IAAKC,MAAA,SAAAC,GAAyB,OAAA5B,EAAAvC,aAAA,kBAAwCuC,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,UAA0CkB,aAAaQ,cAAA,OAAAC,WAAA,OAAAC,MAAA,QAAwDvB,OAAQzE,KAAA,WAAiB2F,IAAKC,MAAA3B,EAAAZ,aAAuBY,EAAAM,GAAA,uBAEhlD0B,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE9G,EACAyE,GATF,EAVA,SAAAsC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/20.72340d455506f5dd0c83.js","sourcesContent":["\r\n<style lang=\"scss\" scoped>\r\n    @import \"../scss/layout.scss\";\r\n    .border-box{\r\n        box-sizing: border-box;\r\n    }  \r\n    .login{\r\n        height: 100vh;\r\n        background-color:#2b4b6b;\r\n        position: relative;\r\n        h1{\r\n            font-size: 35px;\r\n            color: #fff;\r\n            text-align: center;\r\n            padding-top:150px;\r\n        }\r\n        .login-container{\r\n            width: 400px;\r\n            height: 300px;\r\n            background: #fff;\r\n            border-radius: 10px;\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            bottom: 0;\r\n            right: 0;\r\n            margin: auto;\r\n            padding: 25px;\r\n            box-shadow: 0px 0px 35px #000;\r\n        }\r\n    }\r\n    .ivu-input-group {\r\n        font-size: 16px;\r\n    }\r\n    .ivu-input-group i{\r\n        font-size: 16px;\r\n        color: #555;\r\n    }\r\n    \r\n    \r\n</style>\r\n<template>\r\n  <div class=\"login\">\r\n      <h1>湖北村村响省级监管平台</h1>\r\n      <div class=\"login-container\">\r\n        <Form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\">\r\n            <FormItem prop=\"userName\">\r\n                <Input type=\"text\" v-model=\"formInline.userName\" placeholder=\"Username\" size=\"large\" clearable>\r\n                    <Icon type=\"ios-person-outline\" slot=\"prepend\" size=\"25\"></Icon>\r\n                </Input>\r\n            </FormItem>\r\n            <FormItem prop=\"password\">\r\n                <Input type=\"password\" v-model=\"formInline.password\" placeholder=\"Password\" size=\"large\" clearable>\r\n                    <Icon type=\"ios-lock-outline\" slot=\"prepend\" size=\"25\"></Icon>\r\n                </Input>\r\n            </FormItem>\r\n            <Checkbox v-model=\"ifRemember\" style=\"float:right\">记住密码</Checkbox>\r\n            <FormItem style=\"margin-top:70px;text-align:center;\">\r\n                <Button type=\"primary\" @click=\"handleSubmit('formInline')\" style=\"margin-right:25px;\">登录</Button>\r\n                <Button type=\"default\" @click=\"resetForm\" style=\"margin-left:25px;background:#aaa;color:#fff;\">重置</Button>\r\n            </FormItem>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n        data () {\r\n            return {\r\n                ifRemember:false,\r\n                formInline: {\r\n                    userName: '',\r\n                    password: ''\r\n                },\r\n                ruleInline: {\r\n                    userName: [\r\n                        { required: true, message: '请输入您的名字', trigger: 'blur' }\r\n                    ],\r\n                    password: [\r\n                        { required: true, message: '请输入您的密码', trigger: 'blur' },\r\n                        { type: 'string', min: 5, message: '密码最少是五位数', trigger: 'blur' }\r\n                    ]\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            remember(){\r\n                 if (document.cookie.length > 0){\r\n                     this.ifRemember=true\r\n                 }else{\r\n                    this.ifRemember=false\r\n                 }\r\n            },\r\n            setCookie(c_name, c_pwd, exdays) {\r\n                var exdate = new Date(); //获取时间\r\n                exdate.setTime(exdate.getTime() + 24 * 60 * 60 * 1000 * exdays); //保存的天数\r\n                //字符串拼接cookie\r\n                window.document.cookie = \"userName\" + \"=\" + c_name + \";path=/;expires=\" + exdate.toGMTString();\r\n                window.document.cookie = \"userPwd\" + \"=\" + c_pwd + \";path=/;expires=\" + exdate.toGMTString();\r\n            },\r\n            getCookie: function() {\r\n                if (document.cookie.length > 0) {\r\n                    var arr = document.cookie.split('; '); //这里显示的格式需要切割一下自己可输出看下\r\n                    console.log(arr)\r\n                    for (var i = 0; i < arr.length; i++) {\r\n                        var arr2 = arr[i].split('='); //再次切割\r\n                        console.log(arr2)\r\n                        //判断查找相对应的值\r\n                        if (arr2[0] == 'userName') {\r\n                            this.formInline.userName = arr2[1]; //保存到保存数据的地方\r\n                        } else if (arr2[0] == 'userPwd') {\r\n                            this.formInline.password = arr2[1];\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            //清除cookie\r\n            clearCookie: function() {\r\n                this.setCookie(\"\", \"\", -1); //修改2值都为空，天数为负1天就好了\r\n            },\r\n            handleSubmit(name) {\r\n                this.$refs[name].validate((valid) => {\r\n                    if (valid) {\r\n                        let param = new URLSearchParams()\r\n                        param.append('userName', this.formInline.userName)\r\n                        param.append('password', this.formInline.password)\r\n                        this.$axios({\r\n                                method: \"post\",\r\n                                url: '/api/login/user',\r\n                                data: param\r\n                        }).then(res => {\r\n                            console.log(res)\r\n                            if(res.data.state==1){\r\n                                // 1.将登陆成功之后的token，保存到哭护短的sessionStorage中\r\n                                window.sessionStorage.setItem('token',JSON.stringify(res.data.data))\r\n                                //登录成功,提示成功信息，然后跳转到首页，同时将返回信息保存到localstorage中, 将登录名使用vuex传递到layout页面\r\n                                let information = res.data.data;\r\n                                this.$store.commit('handleUserName',information)\r\n                                this.$router.push('/supervision');\r\n                                if(this.ifRemember){\r\n                                    this.setCookie(this.formInline.userName, this.formInline.password,7)\r\n                                }else{\r\n                                     this.clearCookie();\r\n                                }\r\n                               \r\n                            }else{\r\n                                this.$Message.error(res.data.info);\r\n                            }\r\n                        },err => {\r\n                            console.log(err);\r\n                        })\r\n                    } else {\r\n                        this.$Message.error('Fail!');\r\n                    }\r\n                })\r\n            },\r\n            //表单重置\r\n            resetForm(){\r\n                console.log(this.$refs.formInline)\r\n                this.$refs.formInline.resetFields();\r\n            },\r\n            //确认是否保存密码 删除cookie还是保存cookie\r\n        },\r\n        created(){\r\n            let that = this;\r\n            document.onkeypress = function(e) {\r\n            var keycode = document.all ? event.keyCode : e.which;\r\n            if (keycode == 13) {\r\n                that.handleSubmit('formInline');\r\n                return false;\r\n            }\r\n            };\r\n            this.getCookie()\r\n            this.remember()\r\n        },\r\n    }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('h1',[_vm._v(\"湖北村村响省级监管平台\")]),_vm._v(\" \"),_c('div',{staticClass:\"login-container\"},[_c('Form',{ref:\"formInline\",attrs:{\"model\":_vm.formInline,\"rules\":_vm.ruleInline}},[_c('FormItem',{attrs:{\"prop\":\"userName\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"Username\",\"size\":\"large\",\"clearable\":\"\"},model:{value:(_vm.formInline.userName),callback:function ($$v) {_vm.$set(_vm.formInline, \"userName\", $$v)},expression:\"formInline.userName\"}},[_c('Icon',{attrs:{\"slot\":\"prepend\",\"type\":\"ios-person-outline\",\"size\":\"25\"},slot:\"prepend\"})],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"Password\",\"size\":\"large\",\"clearable\":\"\"},model:{value:(_vm.formInline.password),callback:function ($$v) {_vm.$set(_vm.formInline, \"password\", $$v)},expression:\"formInline.password\"}},[_c('Icon',{attrs:{\"slot\":\"prepend\",\"type\":\"ios-lock-outline\",\"size\":\"25\"},slot:\"prepend\"})],1)],1),_vm._v(\" \"),_c('Checkbox',{staticStyle:{\"float\":\"right\"},model:{value:(_vm.ifRemember),callback:function ($$v) {_vm.ifRemember=$$v},expression:\"ifRemember\"}},[_vm._v(\"记住密码\")]),_vm._v(\" \"),_c('FormItem',{staticStyle:{\"margin-top\":\"70px\",\"text-align\":\"center\"}},[_c('Button',{staticStyle:{\"margin-right\":\"25px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSubmit('formInline')}}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"25px\",\"background\":\"#aaa\",\"color\":\"#fff\"},attrs:{\"type\":\"default\"},on:{\"click\":_vm.resetForm}},[_vm._v(\"重置\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2fa1c3f0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2fa1c3f0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2fa1c3f0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2fa1c3f0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}