webpackJsonp([20],{b1FV:function(e,t){},xJsL:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("3cXf"),n=r.n(o),s={data:function(){return{ifRemember:!1,formInline:{userName:"",password:""},ruleInline:{userName:[{required:!0,message:"请输入您的名字",trigger:"blur"}],password:[{required:!0,message:"请输入您的密码",trigger:"blur"},{type:"string",min:5,message:"密码最少是五位数",trigger:"blur"}]}}},methods:{remember:function(){document.cookie.length>0?this.ifRemember=!0:this.ifRemember=!1},setCookie:function(e,t,r){var o=new Date;o.setTime(o.getTime()+864e5*r),window.document.cookie="userName="+e+";path=/;expires="+o.toGMTString(),window.document.cookie="userPwd="+t+";path=/;expires="+o.toGMTString()},getCookie:function(){if(document.cookie.length>0){var e=document.cookie.split("; ");console.log(e);for(var t=0;t<e.length;t++){var r=e[t].split("=");console.log(r),"userName"==r[0]?this.formInline.userName=r[1]:"userPwd"==r[0]&&(this.formInline.password=r[1])}}},clearCookie:function(){this.setCookie("","",-1)},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=new URLSearchParams;r.append("userName",t.formInline.userName),r.append("password",t.formInline.password),t.$axios({method:"post",url:"/api/login/user",data:r}).then(function(e){if(console.log(e),1==e.data.state){window.sessionStorage.setItem("token",n()(e.data.data));var r=e.data.data;t.$store.commit("handleUserName",r),t.$router.push("/supervision"),t.ifRemember?t.setCookie(t.formInline.userName,t.formInline.password,7):t.clearCookie()}else t.$Message.error(e.data.info)},function(e){console.log(e)})}else t.$Message.error("Fail!")})},resetForm:function(){console.log(this.$refs.formInline),this.$refs.formInline.resetFields()}},created:function(){var e=this;document.onkeypress=function(t){if(13==(document.all?event.keyCode:t.which))return e.handleSubmit("formInline"),!1},this.getCookie(),this.remember()}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("h1",[e._v("湖北村村响省级监管平台")]),e._v(" "),r("div",{staticClass:"login-container"},[r("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[r("FormItem",{attrs:{prop:"userName"}},[r("Input",{attrs:{type:"text",placeholder:"Username",size:"large",clearable:""},model:{value:e.formInline.userName,callback:function(t){e.$set(e.formInline,"userName",t)},expression:"formInline.userName"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline",size:"25"},slot:"prepend"})],1)],1),e._v(" "),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"Password",size:"large",clearable:""},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline",size:"25"},slot:"prepend"})],1)],1),e._v(" "),r("Checkbox",{staticStyle:{float:"right"},model:{value:e.ifRemember,callback:function(t){e.ifRemember=t},expression:"ifRemember"}},[e._v("记住密码")]),e._v(" "),r("FormItem",{staticStyle:{"margin-top":"70px","text-align":"center"}},[r("Button",{staticStyle:{"margin-right":"25px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("登录")]),e._v(" "),r("Button",{staticStyle:{"margin-left":"25px",background:"#aaa",color:"#fff"},attrs:{type:"default"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)])},staticRenderFns:[]};var a=r("C7Lr")(s,i,!1,function(e){r("b1FV")},"data-v-2fa1c3f0",null);t.default=a.exports}});
//# sourceMappingURL=20.72340d455506f5dd0c83.js.map